erDiagram
    ALBUM ||--o{ FIELD_MEDIAS : "poss√®de (ER standard)"
    FIELD_MEDIAS }o--|| MEDIA : "r√©f√©rence N-N avec delta"
    MEDIA ||--o{ FIELD_MEDIAS : "peut √™tre dans plusieurs albums"
    ALBUM ||--o{ USER : "liste auteurs (calcul√©)"
    MEDIA }o--|| USER : "cr√©√© par"
    ALBUM }o--|| TAX_EVENEMENT : "li√© √†"
    ALBUM }o--|| TAX_GROUPE_EVENEMENT : "li√© √†"
    MEDIA }o--|| TAX_EVENEMENT : "li√© √†"
    MEDIA }o--|| TAX_GROUPE_EVENEMENT : "li√© √†"
    MEDIA }o--|| TAX_CATEGORIE : "class√© dans"

    ALBUM {
        int nid PK
        string titre
        date date
        text description
        ref evenement FK "field partag√©"
        ref groupe_evenement FK "field partag√©"
        calculated auteurs "agr√©g√©"
    }

    FIELD_MEDIAS {
        int entity_id FK "album_id"
        int target_id FK "media_id"
        int delta "poids/ordre 0,1,2..."
        string field_name "field_medias"
    }

    MEDIA {
        int mid PK
        string bundle "image | video"
        string titre
        ref evenement FK "field partag√©"
        ref groupe_evenement FK "field partag√©"
        ref categorie FK
        ref auteur FK
        file fichier
    }

    TAX_EVENEMENT {
        int tid PK
        string nom
        string description
    }

    TAX_GROUPE_EVENEMENT {
        int tid PK
        string nom
    }

    TAX_CATEGORIE {
        int tid PK
        string nom
    }

    USER {
        int uid PK
        string name
    }

Architecture media-centric (Entity Reference standard)
ALBUM (node)
‚îÇ
‚îÇ 1 ‚îÄ‚îÄ< field_medias (Entity Reference, multivalu√©, avec delta)
‚îÇ
‚ñº
MEDIA (media entity)

üîó Relations d√©taill√©es
ALBUM
 ‚îú‚îÄ field_medias ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ MEDIA
 ‚îÇ    (N-N, ordre g√©r√© par delta)
 ‚îÇ
 ‚îú‚îÄ field_evenement ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ TAX_EVENEMENT
 ‚îú‚îÄ field_groupe_evenement ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ TAX_GROUPE_EVENEMENT
 ‚îî‚îÄ auteurs (calcul√©) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ USER (agr√©g√© depuis MEDIA)

MEDIA
 ‚îú‚îÄ uid (cr√©√© par) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ USER
 ‚îú‚îÄ field_evenement ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ TAX_EVENEMENT
 ‚îú‚îÄ field_groupe_evenement ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ TAX_GROUPE_EVENEMENT
 ‚îî‚îÄ field_categorie ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ TAX_CATEGORIE

üóÇÔ∏è Structure des entit√©s
üßæ ALBUM (node)
ALBUM
- nid (PK)
- titre
- date
- description
- field_evenement (FK)
- field_groupe_evenement (FK)
- field_medias (Entity reference ‚Üí MEDIA, multivalu√©, ordonn√©)
- auteurs (champ calcul√©, agr√©gation des auteurs des m√©dias)

üîó FIELD_MEDIAS (table technique Drupal)
FIELD_MEDIAS
- entity_id   (FK ‚Üí ALBUM.nid)
- target_id   (FK ‚Üí MEDIA.mid)
- delta       (ordre du m√©dia dans l'album : 0,1,2...)
- langcode
- field_name  ("field_medias")


‚ö†Ô∏è Table g√©n√©r√©e automatiquement par Drupal
delta = poids par album, sans conflit multi-albums

üéûÔ∏è MEDIA
MEDIA
- mid (PK)
- bundle ("image" | "video")
- titre
- uid (auteur)
- field_evenement (FK)
- field_groupe_evenement (FK)
- field_categorie (FK)
- fichier (image / video)

üè∑Ô∏è TAXONOMIES
TAX_EVENEMENT
- tid (PK)
- nom
- description

TAX_GROUPE_EVENEMENT
- tid (PK)
- nom

TAX_CATEGORIE
- tid (PK)
- nom

üë§ USER
USER
- uid (PK)
- name
